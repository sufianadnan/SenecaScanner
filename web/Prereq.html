<!DOCTYPE html>
<html lang="en-ca">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>MySeneca</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="main.css" type="text/css" />
		<!-- Font Awesome CDN -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
		/>
		<!-- Favicon -->
		<link rel="icon" href="favicon.ico" />
	</head>

	<body>
		<main>
			<div class="px-4 pt-5 my-5 text-center">
				<img
					src="https://students.senecapolytechnic.ca/Assets/Uploaded-Photos/ce7085a4-0aeb-4e41-8488-8d55365374a5.png"
					alt="Logo"
					width="300"
					style="max-width: 100%"
				/>

				<h1 class="display-5 fw-bold">
					Seneca Security Scanner<br />For Students
				</h1>
				<div class="col-lg-6 mx-auto">
					<p class="lead mb-4">
						Seneca's First AI Powered System Security Scanner built for
						students.
					</p>

					<div class="d-grid gap-2 d-sm-flex justify-content-sm-center mb-5">
						<a onclick="checkNmap()" class="btn btn-primary btn-lg px-4 gap-3"
							>Check PreRequisites</a
						>
						<button
							id="nextButton"
							class="btn btn-outline-secondary btn-lg px-4"
							disabled
						>
							Next
						</button>
					</div>
					<div class="justify-content-sm-center mb-1">
						<p>&nbsp;</p>
					</div>
				</div>
			</div>
		</main>

		<script type="text/javascript" src="/eel.js"></script>
		<script>
			function checkNmap() {
				eel.check_nmap_installation()(function (result) {
					if (result === "Nmap is not installed.") {
						var banner = document.createElement("div");
						banner.className = "alert alert-danger";
						banner.role = "alert";
						banner.innerHTML =
							'<strong>Nmap is not installed!</strong> Please download and install it from <a href="https://nmap.org/dist/nmap-7.94-setup.exe" class="alert-link">here</a>.';
						document.body.insertBefore(banner, document.body.firstChild);
					} else {
						// Enable Next button
						var nextButton = document.getElementById("nextButton");
						nextButton.removeAttribute("disabled");

						// Display banner for prerequisites found
						var successBanner = document.createElement("div");
						successBanner.className = "alert alert-success";
						successBanner.role = "alert";
						successBanner.innerHTML =
							"<strong>All preRequisites found!</strong> Proceed with Next.";
						document.body.insertBefore(successBanner, document.body.firstChild);

						// Add click event listener to navigate to the URL
						nextButton.addEventListener("click", function () {
							// Open page2.html
							window.location.href = "logininstructions.html";

							// Execute eel.retrieve() after a short delay
							setTimeout(function () {
								eel.retrieve();
							}, 0);
						});
					}
				});
			}
		</script>
	</body>
</html>
